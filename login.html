<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑŸÉŸàÿ±ÿ≥ ‚Äî ŸÅŸäÿØŸäŸàŸáÿßÿ™ </title>

<!-- Cairo font -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<!-- ÿ≠ŸÖÿßŸäÿ© ŸÖÿ™ŸÇÿØŸÖÿ© -->
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; media-src 'self' blob: data:; img-src 'self' data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; script-src 'self' 'unsafe-inline';">
<meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), autoplay=(), screen-wake-lock=()">

<style>
  :root{
    --bg:#ffffff;
    --card:#ffffff;
    --muted:#5a6d80;
    --accent1:#2ecc71;
    --accent2:#f39c12;
    --max-width:1100px;
    --yt-width: min(var(--max-width), 96vw);
    --yt-height: calc(var(--yt-width) * 9 / 16);
    --glass: rgba(0,0,0,0.03);
  }
  *{box-sizing:border-box; margin:0; padding:0}
  html,body{height:100%; overflow-x:hidden}
  body{
    margin:0; font-family:'Cairo',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;
    background-color:var(--bg);
    color:#1a2a3a; -webkit-font-smoothing:antialiased;
    -webkit-user-select:none; user-select:none;
    background-image: 
      radial-gradient(circle at 10% 20%, rgba(46, 204, 113, 0.05) 0%, transparent 20%),
      radial-gradient(circle at 90% 80%, rgba(243, 156, 18, 0.05) 0%, transparent 20%);
  }

  /* topbar */
  .topbar{
    position:sticky;
    top:0;
    z-index:80;
    background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.92));
    backdrop-filter:blur(6px);
    border-bottom:1px solid rgba(0,0,0,0.05);
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }
  .topwrap{
    max-width:var(--max-width);
    margin:auto;
    padding:12px 16px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px
  }
  .brand{
    display:flex;
    align-items:center;
    gap:12px;
    font-weight:900;
    color:#1a2a3a
  }
  .brand .dot{
    width:12px;
    height:12px;
    border-radius:50%;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    box-shadow:0 6px 24px rgba(46, 204, 113, 0.15)
  }
  .clock{
    font-weight:900;
    color:#3a4a5a;
    min-width:150px;
    text-align:center
  }
  .actionsbar{
    display:flex;
    gap:8px
  }
  .btn{
    appearance:none;
    border:0;
    padding:8px 12px;
    border-radius:10px;
    font-weight:800;
    cursor:pointer;
    transition:all 0.2s ease
  }
  .btn.ghost{
    background:transparent;
    color:#3a4a5a;
    border:1px solid rgba(0,0,0,.08)
  }
  .btn.ghost:hover{
    background:rgba(0,0,0,0.05)
  }
  .btn.primary{
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    color:white;
    box-shadow:0 4px 12px rgba(46, 204, 113, 0.2)
  }
  .btn.primary:hover{
    transform:translateY(-1px);
    box-shadow:0 6px 16px rgba(46, 204, 113, 0.3)
  }

  /* toast */
  .toast{
    position:fixed;
    top:18px;
    right:18px;
    padding:10px 14px;
    border-radius:12px;
    font-weight:900;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    color:white;
    z-index:120;
    box-shadow:0 12px 40px rgba(0,0,0,.15);
    opacity:0;
    transform:translateY(-8px);
    transition:.35s
  }
  .toast.show{
    opacity:1;
    transform:none
  }

  /* layout */
  .container{
    max-width:var(--max-width);
    margin:0 auto;
    padding:0 16px
  }
  .header-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:10px
  }
  .who{
    font-weight:900;
    color:#1a3a5a
  }
  .muted{
    color:var(--muted);
    font-weight:700;
    opacity:.9
  }

  /* login card */
  .center-card{
    display:grid;
    place-items:center;
    padding:20px;
    min-height:100vh
  }
  .card{
    width:min(720px,96vw);
    background:white;
    border-radius:14px;
    padding:22px;
    border:1px solid rgba(0,0,0,.05);
    box-shadow:0 18px 60px rgba(0,0,0,.08);
    margin-top:-60px
  }
  .card-head{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin-bottom:6px;
    text-align:center
  }
  .card-head h1{
    margin:0;
    font-size:20px;
    font-weight:900;
    color:#1a2a3a
  }
  .inputs{
    display:flex;
    gap:10px;
    flex-direction:column;
    margin-top:12px
  }
  .input{
    padding:12px;
    border-radius:10px;
    border:1px solid rgba(0,0,0,.08);
    background:#f8faff;
    color:#1a2a3a;
    outline:none;
    font-size:15px;
    transition:border 0.2s ease
  }
  .input:focus{
    border-color:var(--accent1);
    box-shadow:0 0 0 2px rgba(46, 204, 113, 0.1)
  }

  /* motivation */
  .motivation{
    position:sticky;
    top:56px;
    z-index:60;
    background:linear-gradient(90deg, rgba(46, 204, 113, 0.08), rgba(243, 156, 18, 0.06));
    border-bottom:1px dashed rgba(0,0,0,.05)
  }
  .motivation .wrap{
    max-width:var(--max-width);
    margin:auto;
    padding:10px 16px;
    text-align:center;
    font-weight:900;
    color:#3a5a7a
  }
  .fade{
    opacity:0;
    transform:translateY(-6px);
    transition:.35s
  }
  .fade.show{
    opacity:1;
    transform:none
  }

  /* videos list (stacked like youtube) */
  #videos{
    display:flex;
    flex-direction:column;
    gap:26px;
    align-items:center;
    margin-top:18px
  }
  .vcard{
    width:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
    background:white;
    border-radius:12px;
    padding:16px;
    box-shadow:0 8px 24px rgba(0,0,0,.05);
    border:1px solid rgba(0,0,0,.05)
  }
  .vhead{
    width:100%;
    max-width:var(--yt-width);
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:6px 8px;
    color:#1a3a5a;
    font-weight:900
  }
  .yt-embed{
    position:relative;
    width:100%;
    max-width:var(--yt-width);
    border-radius:10px;
    overflow:hidden;
    border:1px solid rgba(0,0,0,.08);
    background:#000
  }
  .yt-embed iframe{
    width:100%;
    height:var(--yt-height);
    border:none
  }
  .controls{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:10px;
    background:linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.01))
  }
  .cbtn{
    background:transparent;
    border:1px solid rgba(0,0,0,.08);
    padding:8px 10px;
    border-radius:8px;
    color:#3a4a5a;
    font-weight:900;
    cursor:pointer;
    transition:all 0.2s ease
  }
  .cbtn:hover{
    background:rgba(0,0,0,0.05)
  }

  /* watermark overlay */
  .wm{
    pointer-events:none;
    position:absolute;
    inset:0;
    z-index:14
  }
  .wm .tag{
    position:absolute;
    right:12px;
    bottom:10px;
    font-weight:900;
    font-size:13px;
    color:rgba(255,255,255,.92);
    text-shadow:0 2px 8px rgba(0,0,0,.6);
    opacity:.9
  }
  .wm .stamp{
    position:absolute;
    left:12px;
    bottom:10px;
    font-weight:700;
    font-size:12px;
    color:rgba(255,255,255,.75)
  }

  /* lock overlay */
  .lock{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.95);
    display:none;
    place-items:center;
    z-index:200
  }
  .lock .box{
    background:white;
    padding:28px;
    border-radius:12px;
    border:1px solid rgba(0,0,0,.1);
    color:#1a2a3a;
    text-align:center;
    max-width:520px;
    box-shadow:0 12px 40px rgba(0,0,0,.1)
  }

  /* reveal animation */
  .reveal{
    opacity:0;
    transform:translateY(18px);
    transition:all .55s cubic-bezier(.2,.9,.2,1)
  }
  .reveal.visible{
    opacity:1;
    transform:none
  }

  /* responsive */
  @media (max-width:760px){
    :root{--yt-width: calc(100vw - 32px); --yt-height: calc(var(--yt-width) * 9 / 16)}
    .card{width:calc(100vw - 32px); margin-top:0}
    .vcard{padding:12px}
    .controls{flex-direction:column;gap:8px}
  }

  /* floating particles */
  .particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
  }

  /* black overlay for screen capture */
  .black-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    z-index: 9999;
    display: none;
  }

  /* youtube link input */
  .link-input {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid rgba(0,0,0,0.1);
    margin-bottom: 10px;
    font-family: 'Cairo', sans-serif;
  }

  /* add video button */
  .add-video-btn {
    background: linear-gradient(135deg, var(--accent1), var(--accent2));
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    margin-bottom: 20px;
    box-shadow: 0 4px 12px rgba(46, 204, 113, 0.2);
  }
</style>
</head>
<body>

<!-- floating particles background -->
<div class="particles" id="particles"></div>

<!-- black overlay for screen capture -->
<div class="black-overlay" id="blackOverlay"></div>

<!-- top bar -->
<div class="topbar">
  <div class="topwrap">
    <div class="brand"><span class="dot"></span><span>ŸÖŸÜÿµÿ© ÿßŸÑŸÉŸàÿ±ÿ≥ (ÿ≠ŸÖÿßŸäÿ© ŸÇÿµŸàŸâ)</span></div>
    <div class="clock" id="clock">--:--:--</div>
    <div class="actionsbar">
      <button class="btn ghost" id="backBtn" title="ÿ±ÿ¨Ÿàÿπ">‚¨ÖÔ∏è</button>
      <button class="btn primary" id="panicBtn" title="ÿÆÿ±Ÿàÿ¨ ŸÅŸàÿ±Ÿä">üö® ÿÆÿ±Ÿàÿ¨</button>
    </div>
  </div>
</div>

<!-- motivation -->
<div class="motivation">
  <div class="wrap"><div id="motivationText" class="fade">‚ú¶ ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ ‚Äî ÿßŸÑÿØŸÇÿßÿ¶ŸÇ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© ÿ™ÿµŸÜÿπ ŸÅÿ±ŸÇŸãÿß ŸÉÿ®Ÿäÿ±Ÿãÿß.</div></div>
</div>

<!-- toast -->
<div id="toast" class="toast">üîí ÿßŸÑŸÖŸàŸÇÿπ ŸÖÿ§ŸÖŸëŸÜ</div>

<!-- lock overlay -->
<div id="lock" class="lock" aria-hidden="true">
  <div class="box">
    <h2>üö´ ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¨ŸÑÿ≥ÿ©</h2>
    <p id="lockMsg">ÿ™ŸÖ ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ¨ŸÑÿ≥ÿ© ŸÑÿ£ÿ≥ÿ®ÿßÿ® ÿ£ŸÖŸÜŸäŸëÿ©.</p>
  </div>
</div>

<!-- login screen -->
<main id="login" class="center-card">
  <div class="card" role="dialog" aria-labelledby="login-title">
    <div class="card-head">
      <h1 id="login-title">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑŸÉŸàÿ±ÿ≥</h1>
      <div class="muted">ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸàŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ŸÑŸÑŸÖÿ™ÿßÿ®ÿπÿ©</div>
    </div>
    <div class="inputs">
      <input id="u" class="input" placeholder="ŸÖÿ´ÿßŸÑ: dr2025001" autocomplete="username" />
      <input id="p" class="input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" type="password" autocomplete="current-password" />
      <div style="display:flex;gap:10px">
        <button id="loginBtn" class="btn primary">ÿØÿÆŸàŸÑ</button>
        <button id="clearBtn" class="btn ghost">ŸÖÿ≥ÿ≠</button>
      </div>
      <div id="err" class="muted" style="margin-top:8px;height:20px"></div>
      <div style="margin-top:10px"><small class="muted">ŸÖÿ≠ŸÖŸä ‚Äî ŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑŸÜÿ≥ÿÆ ÿ£Ÿà ÿßŸÑÿ™ÿµŸàŸäÿ± ÿØÿßÿÆŸÑ ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÇÿØ ÿ™ŸèŸÜŸáŸêŸä ÿßŸÑÿ¨ŸÑÿ≥ÿ©</small></div>
    </div>
  </div>
</main>

<!-- app (hidden until login) -->
<section id="app" style="display:none;opacity:0">
  <div class="container">
    <div class="header-row">
      <div class="who" id="who"></div>
      <div style="display:flex;gap:8px">
        <button id="logoutBtn" class="btn ghost">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</button>
        <button id="addVideoBtn" class="btn primary">ÿ•ÿ∂ÿßŸÅÿ© ŸÅŸäÿØŸäŸà</button>
      </div>
    </div>


    <!-- videos will be injected here -->
    <div id="videos"></div>
  </div>
</section>

<script>
/* =================== ÿ®ŸäÿßŸÜÿßÿ™ (ÿπÿØŸÑ ŸáŸÜÿß) =================== */
// ÿ£ÿ∂ŸÅ/ÿßÿ≠ÿ∞ŸÅ ÿ£Ÿà ÿ∫Ÿäÿ± ÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸáŸÜÿß
const users = [
  { username: "dr2025001", password: "QK472" },
  { username: "dr2025002", password: "HB915" },
  { username: "dr2025003", password: "MT648" },
  { username: "dr2025004", password: "ZW183" },
  { username: "dr2025005", password: "LC592" },
  { username: "dr2025006", password: "FD706" },
  { username: "dr2025007", password: "AX354" },
  { username: "dr2025008", password: "VE801" },
  { username: "dr2025009", password: "JP627" },
  { username: "dr2025010", password: "RY548" },
  { username: "dr2025011", password: "NU269" },
  { username: "dr2025012", password: "TB940" },
  { username: "dr2025013", password: "GK731" },
  { username: "dr2025014", password: "WM825" },
  { username: "dr2025015", password: "CQ174" },
  { username: "dr2025016", password: "SZ396" },
  { username: "dr2025017", password: "PH209" },
  { username: "dr2025018", password: "OV651" },
  { username: "dr2025019", password: "EY384" },
  { username: "dr2025020", password: "BJ972" },
  { username: "dr2025021", password: "LF103" },
  { username: "dr2025022", password: "KI854" },
  { username: "dr2025023", password: "MX427" },
  { username: "dr2025024", password: "HD769" },
  { username: "dr2025025", password: "QG295" },
  { username: "dr2025026", password: "RN618" },
  { username: "dr2025027", password: "ZW587" },
  { username: "dr2025028", password: "YS230" },
  { username: "dr2025029", password: "AJ953" },
  { username: "dr2025030", password: "UC467" },
  { username: "dr2025031", password: "TE982" },
  { username: "dr2025032", password: "BL719" },
  { username: "dr2025033", password: "VP306" },
  { username: "dr2025034", password: "OS840" },
  { username: "dr2025035", password: "XR594" },
  { username: "dr2025036", password: "DW718" },
  { username: "dr2025037", password: "MC285" },
  { username: "dr2025038", password: "HQ964" },
  { username: "dr2025039", password: "NY431" },
  { username: "dr2025040", password: "FB609" },
  { username: "dr2025041", password: "LS284" },
  { username: "dr2025042", password: "PU719" },
  { username: "dr2025043", password: "ZC517" },
  { username: "dr2025044", password: "KM402" },
  { username: "dr2025045", password: "YG835" },
  { username: "dr2025046", password: "AD790" },
  { username: "dr2025047", password: "RJ652" },
  { username: "dr2025048", password: "VH291" },
  { username: "dr2025049", password: "OE547" },
  { username: "dr2025050", password: "TI386" },
  { username: "dr2025051", password: "CN482" },
  { username: "dr2025052", password: "QZ178" },
  { username: "dr2025053", password: "WS690" },
  { username: "dr2025054", password: "ML520" },
  { username: "dr2025055", password: "PX947" },
  { username: "dr2025056", password: "FV613" },
  { username: "dr2025057", password: "GE294" },
  { username: "dr2025058", password: "BY740" },
  { username: "dr2025059", password: "HU835" },
  { username: "dr2025060", password: "AK507" },
  { username: "dr2025061", password: "XQ392" },
  { username: "dr2025062", password: "ZL681" },
  { username: "dr2025063", password: "DR158" },
  { username: "dr2025064", password: "OE473" },
  { username: "dr2025065", password: "SJ594" },
  { username: "dr2025066", password: "KF819" },
  { username: "dr2025067", password: "UL280" },
  { username: "dr2025068", password: "PQ967" },
  { username: "dr2025069", password: "VR136" },
  { username: "dr2025070", password: "NW548" },
  { username: "dr2025071", password: "HZ209" },
  { username: "dr2025072", password: "CG874" },
  { username: "dr2025073", password: "LB705" },
  { username: "dr2025074", password: "TP491" },
  { username: "dr2025075", password: "EJ602" },
  { username: "dr2025076", password: "MY253" },
  { username: "dr2025077", password: "FS980" },
  { username: "dr2025078", password: "QO178" },
  { username: "dr2025079", password: "VK320" },
  { username: "dr2025080", password: "AI695" },
  { username: "dr2025081", password: "ZR586" },
  { username: "dr2025082", password: "DY403" },
  { username: "dr2025083", password: "GW217" },
  { username: "dr2025084", password: "XT950" },
  { username: "dr2025085", password: "JE184" },
  { username: "dr2025086", password: "UC729" },
  { username: "dr2025087", password: "PM604" },
  { username: "dr2025088", password: "KV315" },
  { username: "dr2025089", password: "RX890" },
  { username: "dr2025090", password: "BQ278" },
  { username: "dr2025091", password: "NH542" },
  { username: "dr2025092", password: "LV631" },
  { username: "dr2025093", password: "SW907" },
  { username: "dr2025094", password: "EA756" },
  { username: "dr2025095", password: "YM428" },
  { username: "dr2025096", password: "ZT903" },
  { username: "dr2025097", password: "DG547" },
  { username: "dr2025098", password: "KU362" },
  { username: "dr2025099", password: "HP690" },
  { username: "dr2025100", password: "OF284" }
];

// ÿ±Ÿàÿßÿ®ÿ∑ ŸäŸàÿ™ŸäŸàÿ® ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
let youtubeLinks = [
  'https://youtu.be/zu2S6v7tWAE?si=bUtyYkquUJGpo0ls',
  'https://www.youtube.com/embed/dQw4w9WgXcQ',
  'https://www.youtube.com/embed/dQw4w9WgXcQ'
];

/* =================== ŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿ≠ÿßŸÑÿ© =================== */
let currentUser = null;
let okUntil = 0;           // ŸÜÿßŸÅÿ∞ÿ© ÿ≥ŸÖÿßÿ≠ ŸÑŸÑÿ™ŸÅÿßÿπŸÑ
let suppressOnce = false;  // ŸÑÿ™ÿ¨ÿßŸáŸÑ ÿ£ŸàŸÑ ÿ™ÿ∫ŸäŸäÿ± ÿπŸÜÿØŸÖÿß ŸäŸÉŸàŸÜ ŸÖÿ¥ÿ±Ÿàÿπ
let securityAttempts = 0;  // ÿπÿØÿØ ŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑÿßÿÆÿ™ÿ±ÿßŸÇ
const MAX_SECURITY_ATTEMPTS = 3; // ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™
const ANGRY = 'üò° ŸÖÿ≠ÿßŸàŸÑÿ© ÿ∫Ÿäÿ± ŸÖÿ≥ŸÖŸàÿ≠ ÿ®Ÿáÿß ‚Äî ÿ™ŸÖ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ŸÅŸàÿ±Ÿãÿß.';
const qs = (s,p=document) => p.querySelector(s);
const qsa = (s,p=document) => [...p.querySelectorAll(s)];

function showToast(msg){
  const t = qs('#toast'); t.textContent = msg; t.classList.add('show');
  setTimeout(()=> t.classList.remove('show'), 2200);
}

/* =================== ÿßŸÑÿ≥ÿßÿπÿ© =================== */
function tickClock(){
  try{
    const now = new Date();
    const fmt = new Intl.DateTimeFormat('ar-EG',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false,timeZone:'Africa/Cairo'});
    qs('#clock').textContent = fmt.format(now);
  }catch{ qs('#clock').textContent = new Date().toLocaleTimeString(); }
}
setInterval(tickClock,1000); tickClock();

/* =================== ÿ™ÿ¨ŸàŸÑ ÿ¨ŸèŸÖŸÑ ÿ™ÿ≠ŸÅŸäÿ≤Ÿäÿ© =================== */
const MOTIVATIONS = [
  '‚ú¶ ÿßÿ®ÿØÿ£ ÿßŸÑÿ¢ŸÜ ‚Äî ÿßŸÑÿØŸÇÿßÿ¶ŸÇ ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© ÿ™ÿµŸÜÿπ ŸÅÿ±ŸÇŸãÿß ŸÉÿ®Ÿäÿ±Ÿãÿß.',
  '‚ú¶ ŸÉŸÑ ŸÅŸäÿØŸäŸà ÿ™ŸÜŸáŸäŸá ŸäŸÇÿ±Ÿëÿ®ŸÉ ŸÖŸÜ ŸáÿØŸÅŸÉ.',
  '‚ú¶ ÿßŸÑÿ™ÿ≤ÿßŸÖŸÉ ÿßŸÑŸäŸàŸÖ = ÿ´ŸÇÿ© ÿ£ŸÉÿ®ÿ± ÿ∫ÿØŸãÿß.',
  '‚ú¶ ŸÑÿß ÿ™ŸÜÿ™ÿ∏ÿ± ÿßŸÑŸÖÿ´ÿßŸÑŸäÿ© ‚Äî ÿ™ŸÇÿØŸëŸÖ ÿÆÿ∑Ÿàÿ©.',
  '‚ú¶ ÿ™ÿπŸÑŸëŸÖ ÿ®ÿ™ÿ±ŸÉŸäÿ≤ÿå ÿ±ÿßÿ≠ÿ© ŸÇÿµŸäÿ±ÿ©ÿå ÿ´ŸÖ ÿπŸèÿØ ÿ®ŸÇŸàÿ©.',
  '‚ú¶ ÿßŸÑÿπŸÑŸÖ ÿ±ÿ≤ŸÇÿå ŸàŸÜŸäŸëÿ™ŸÉ ÿßŸÑÿ∑Ÿäÿ®ÿ© ÿ™ŸÅÿ™ÿ≠ ÿßŸÑÿ£ÿ®Ÿàÿßÿ®.',
  '‚ú¶ ÿ£ŸÜÿ™ ÿ£ŸÇŸàŸâ ŸÖŸÖÿß ÿ™ÿ∏ŸÜ ‚Äî ŸÉŸÖŸÑ ŸÑŸÑÿ¢ÿÆÿ±.'
];
(function rotateMotivation(){
  const el = qs('#motivationText'); let i=0;
  setInterval(()=>{
    el.classList.remove('show');
    setTimeout(()=>{ el.textContent = MOTIVATIONS[(++i)%MOTIVATIONS.length]; el.classList.add('show'); }, 260);
  }, 5200);
  requestAnimationFrame(()=> qs('#motivationText').classList.add('show'));
})();

/* =================== ÿπŸÜÿßÿµÿ± DOM - ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ =================== */
qs('#loginBtn').addEventListener('click', ()=>{
  const u = qs('#u').value.trim(), p = qs('#p').value.trim();
  if(!u || !p){ qs('#err').textContent = 'ŸÖŸÜ ŸÅÿ∂ŸÑŸÉ ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÉÿßŸÖŸÑÿ©'; return; }
  if(!/^dr2025\d{3}$/i.test(u)){ qs('#err').textContent = 'ÿµŸäÿ∫ÿ© ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ ŸÖÿ´ŸÑ: dr2025001'; return; }
  if(!users.some(x => x.username === u && x.password === p)){ qs('#err').textContent = '‚ùå ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©'; return; }
  qs('#err').textContent = ''; currentUser = u; qs('#who').textContent = `ŸÖÿ±ÿ≠ÿ®Ÿãÿßÿå ${u}`;
  renderVideos(); enterApp();
});
qs('#clearBtn').addEventListener('click', ()=>{ qs('#u').value=''; qs('#p').value=''; qs('#err').textContent=''; });
qs('#logoutBtn').addEventListener('click', ()=> forceLogout('üö™ ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨'));
qs('#panicBtn').addEventListener('click', ()=> forceLogout('‚õî ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ¨ŸÑÿ≥ÿ©'));
qs('#backBtn').addEventListener('click', ()=> { try{ history.length>1 ? history.back() : location.replace('/'); }catch{ location.replace('/'); } });

// ÿ•ÿ∂ÿßŸÅÿ© ŸÅŸäÿØŸäŸà ÿ¨ÿØŸäÿØ
qs('#addVideoBtn').addEventListener('click', ()=> {
  qs('#addVideoForm').style.display = 'block';
});

qs('#submitVideoBtn').addEventListener('click', ()=> {
  const link = qs('#videoLink').value.trim();
  if(!link) return;
  
  // ÿ™ÿ≠ŸàŸäŸÑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸäŸàÿ™ŸäŸàÿ® ÿ•ŸÑŸâ ÿ±ÿßÿ®ÿ∑ embed
  let embedLink = link;
  if(link.includes('youtube.com/watch?v=')) {
    embedLink = link.replace('youtube.com/watch?v=', 'youtube.com/embed/');
  } else if(link.includes('youtu.be/')) {
    embedLink = link.replace('youtu.be/', 'youtube.com/embed/');
  }
  
  if(!embedLink.includes('youtube.com/embed/')) {
    showToast('‚ö†Ô∏è ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠');
    return;
  }
  
  youtubeLinks.push(embedLink);
  renderVideos();
  qs('#videoLink').value = '';
  qs('#addVideoForm').style.display = 'none';
  showToast('‚úÖ ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÅŸäÿØŸäŸà ÿ®ŸÜÿ¨ÿßÿ≠');
});

function enterApp(){
  qs('#login').style.display = 'none';
  const app = qs('#app'); app.style.display = 'block';
  requestAnimationFrame(()=> app.style.opacity = 1);
  showToast('üéâ ÿ™ŸÖ ÿßŸÑÿØÿÆŸàŸÑ ‚Äî ŸÖÿ±ÿ≠ÿ®Ÿãÿß ÿ®ŸÉ');
}

/* =================== render videos (YouTube embeds) =================== */
function renderVideos(){
  const wrap = qs('#videos'); wrap.innerHTML = '';
  youtubeLinks.forEach((src, idx) => {
    const id = idx + 1;
    const article = document.createElement('article');
    article.className = 'vcard reveal';
    article.innerHTML = `
      <div class="vhead">
        <div>üé¨ ÿßŸÑŸÅŸäÿØŸäŸà ${id}</div>
        <div style="color:var(--accent2);font-weight:900">ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÅŸÇÿ∑</div>
      </div>
      <div class="yt-embed">
        <div class="wm"></div>
        <iframe src="${src}?rel=0&modestbranding=1&controls=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    `;
    wrap.appendChild(article);

    // ÿ•ÿ∂ÿßŸÅÿ© ÿπŸÑÿßŸÖÿ© ŸÖÿßÿ¶Ÿäÿ©
    const wm = article.querySelector('.wm');
    const tag = document.createElement('span');
    tag.className = 'tag';
    tag.textContent = currentUser || '';
    wm.appendChild(tag);
    const stamp = document.createElement('span');
    stamp.className = 'stamp';
    stamp.textContent = new Date().toLocaleString('ar-EG', { timeZone:'Africa/Cairo' });
    wm.appendChild(stamp);
    startFloatingWM(tag);
  });

  // reveal animation for cards
  const reveals = qsa('.reveal');
  const obs = new IntersectionObserver(entries => {
    entries.forEach(en => { if(en.isIntersecting){ en.target.classList.add('visible'); obs.unobserve(en.target); } });
  }, { threshold: 0.12 });
  reveals.forEach(r => obs.observe(r));
}

/* =============== floating watermark movement =============== */
function startFloatingWM(el){
  if(!el) return;
  const parent = el.closest('.yt-embed') || el.parentElement;
  const move = ()=>{
    try{
      const r = parent.getBoundingClientRect();
      const pad = 30;
      const x = Math.random() * Math.max(1, r.width - pad*2) + pad;
      const y = Math.random() * Math.max(1, r.height - pad*2) + pad;
      el.style.transform = `translate(${x}px, ${y}px)`;
      el.style.opacity = String(0.6 + Math.random()*0.35);
    }catch{}
  };
  move();
  setInterval(move, 2200 + Math.random()*1200);
}

/* =============== ÿ≠ŸÖÿßŸäÿ© ŸÖÿ™ŸÇÿØŸÖÿ© ÿ∂ÿØ ÿ™ÿµŸàŸäÿ± ÿßŸÑÿ¥ÿßÿ¥ÿ© =============== */
function blockForCapture(extra){
  if(!currentUser) return;
  securityAttempts++;
  
  if(securityAttempts >= MAX_SECURITY_ATTEMPTS) {
    forceLogout(`üò° ${ANGRY} (ÿ™ŸÖ ÿ™ÿ¨ÿßŸàÿ≤ ÿπÿØÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ÿßŸÑŸÖÿ≥ŸÖŸàÿ≠ ÿ®Ÿáÿß)`);
    return;
  }
  
  const msg = `üö´ ŸÖŸÖŸÜŸàÿπ ÿ£ÿÆÿ∞ ŸÑŸÇÿ∑ÿ© ÿ¥ÿßÿ¥ÿ© ÿ£Ÿà ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿ¥ÿßÿ¥ÿ©${extra? ' ‚Äî ('+extra+')' : ''}\nÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ${securityAttempts} ŸÖŸÜ ${MAX_SECURITY_ATTEMPTS}`;
  showToast(msg);
  
  // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ≥ŸàÿØÿßÿ° ŸÑŸÖÿØÿ© 3 ÿ´ŸàÿßŸÜŸä
  const overlay = qs('#blackOverlay');
  overlay.style.display = 'block';
  setTimeout(() => {
    overlay.style.display = 'none';
  }, 3000);
  
  // ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿµŸàÿ™ ŸÖÿ§ŸÇÿ™Ÿãÿß
  document.querySelectorAll('iframe').forEach(iframe => {
    try {
      iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
    } catch(e) {}
  });
  
  // ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ÿπŸÜÿØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ£ÿÆŸäÿ±ÿ©
  if(securityAttempts === MAX_SECURITY_ATTEMPTS) {
    setTimeout(() => {
      forceLogout(`üò° ${ANGRY} (ÿ¢ÿÆÿ± ÿ™ÿ≠ÿ∞Ÿäÿ±)`);
    }, 1000);
  }
}

/* =============== ŸÖŸÜÿπ ÿ™ÿµŸàŸäÿ± ÿßŸÑÿ¥ÿßÿ¥ÿ© =============== */
// ŸÖŸÜÿπ ŸÉŸÑŸäŸÉ ŸäŸÖŸäŸÜ
document.addEventListener('contextmenu', e=>{
  e.preventDefault();
  if(currentUser) blockForCapture('ŸÉŸÑŸäŸÉ ŸäŸÖŸäŸÜ');
  return false;
}, true);

// ŸÖŸÜÿπ ÿßŸÑŸÜÿ≥ÿÆ/ÿßŸÑŸÇÿµ/ÿßŸÑŸÑÿµŸÇ
['copy','cut','paste','selectstart','dragstart'].forEach(ev=>{
  document.addEventListener(ev, e=>{
    e.preventDefault();
    if(currentUser) blockForCapture(ev);
  }, true);
});

// ŸÖŸÜÿπ ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠
document.addEventListener('keydown', (e)=>{
  const key = e.key || '';
  const ctrl = e.ctrlKey || e.metaKey;
  const sh = e.shiftKey;
  const lowered = key.toLowerCase();
  const suspicious =
    (ctrl && ['s','u','p','a','c','x','i','o','n'].includes(lowered)) ||
    (ctrl && sh && ['i','j','c','n','t','o'].includes(lowered)) ||
    key === 'F12' ||
    key === 'PrintScreen' ||
    (e.metaKey && sh && ['3','4','5'].includes(lowered));
  
  if(suspicious){
    e.preventDefault();
    e.stopPropagation();
    if(currentUser) blockForCapture(`ŸÖŸÅÿ™ÿßÿ≠ ${key}`);
  }
}, true);

// ŸÖŸÜÿπ ÿßŸÑÿ∑ÿ®ÿßÿπÿ©
window.onbeforeprint = ()=> { if(currentUser) blockForCapture('ÿ∑ÿ®ÿßÿπÿ©'); };

// ŸÖŸÜÿπ ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿ¨ŸÖ ÿßŸÑŸÜÿßŸÅÿ∞ÿ©
let lastW = window.innerWidth, lastH = window.innerHeight;
window.addEventListener('resize', ()=> {
  if(!currentUser) return;
  const dw = Math.abs(window.innerWidth - lastW), dh = Math.abs(window.innerHeight - lastH);
  lastW = window.innerWidth; lastH = window.innerHeight;
  if((dw>240 || dh>240) && !isSafeInteraction()) blockForCapture('ÿ™ÿ®ÿØŸäŸÑ ÿ¥ÿßÿ¥ÿ©/ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÖÿ≠ÿ™ŸÖŸÑ');
});

// ŸÖŸÜÿπ ŸÅÿ™ÿ≠ ÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÖÿ∑Ÿàÿ±ŸäŸÜ
let devCheck = setInterval(()=>{
  try{
    const bigGap = (window.outerWidth - window.innerWidth) > 160 || (window.outerHeight - window.innerHeight) > 160;
    if(bigGap && currentUser) return blockForCapture('DevTools');
    const x = { get id(){ if(currentUser) blockForCapture('Console Open'); } };
    console.log(x);
    let t = performance.now();
    for(let i=0;i<100000;i++){}
    if(performance.now() - t > 250 && currentUser) blockForCapture('Debug Slow');
  }catch{}
}, 1500);

// ŸÖŸÜÿπ ÿ™ÿµŸàŸäÿ± ÿßŸÑÿ¥ÿßÿ¥ÿ© ÿπŸÜÿØ ŸÅŸÇÿØÿßŸÜ ÿßŸÑÿ™ÿ±ŸÉŸäÿ≤
document.addEventListener('visibilitychange', ()=> {
  if(!currentUser) return;
  if(document.hidden){
    if(suppressOnce){ suppressOnce = false; return; }
    if(!isSafeInteraction()) blockForCapture('ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ™ÿ®ŸàŸäÿ®/ÿ™ÿµŸàŸäÿ±');
  }
});

window.addEventListener('blur', ()=> { 
  if(currentUser && !isSafeInteraction()) blockForCapture('ŸÅŸÇÿØÿßŸÜ ÿ™ÿ±ŸÉŸäÿ≤'); 
});

/* =============== ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ¨ŸÑÿ≥ÿ© ŸÇÿ≥ÿ±ŸäŸãÿß =============== */
function forceLogout(msg){
  currentUser = null;
  try{ qs('#who').textContent = ''; }catch{}
  const lock = qs('#lock'); qs('#lockMsg').textContent = msg || ANGRY; lock.style.display = 'grid';
  setTimeout(()=> {
    try{ sessionStorage.clear(); localStorage.clear(); }catch{}
    try{ document.body.innerHTML = ''; }catch{}
    try{ window.stop(); }catch{}
    try{ location.replace('about:blank'); }catch{}
  }, 260);
}

/* =============== ÿ¨ÿ≤Ÿäÿ¶ÿßÿ™ ŸÖÿ™ÿ≠ÿ±ŸÉÿ© ŸÅŸä ÿßŸÑÿÆŸÑŸÅŸäÿ© =============== */
(function particles(){
  const canvas = qs('#particles');
  const ctx = canvas.getContext('2d');
  let particles = [];
  const colors = ['#2ecc71', '#f39c12', '#3498db', '#e74c3c', '#9b59b6'];
  
  function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  
  function init(){
    particles = [];
    const particleCount = Math.floor(window.innerWidth / 10);
    for(let i = 0; i < particleCount; i++){
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 3 + 1,
        color: colors[Math.floor(Math.random() * colors.length)],
        speedX: Math.random() * 0.2 - 0.1,
        speedY: Math.random() * 0.2 - 0.1
      });
    }
  }
  
  function animate(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    for(let i = 0; i < particles.length; i++){
      const p = particles[i];
      
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
      ctx.fillStyle = p.color;
      ctx.fill();
      
      p.x += p.speedX;
      p.y += p.speedY;
      
      if(p.x < 0 || p.x > canvas.width) p.speedX *= -1;
      if(p.y < 0 || p.y > canvas.height) p.speedY *= -1;
    }
    
    requestAnimationFrame(animate);
  }
  
  window.addEventListener('resize', ()=>{
    resize();
    init();
  });
  
  resize();
  init();
  animate();
})();

/* =============== ÿ±ÿ≥ÿßŸÑÿ© ÿ®ÿØÿ° ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ =============== */
showToast('üîí ÿßŸÑŸÖŸàŸÇÿπ ŸÖÿ§ŸÖŸëŸÜ ‚Äî ÿ£Ÿä ŸÖÿ≠ÿßŸàŸÑÿ© ŸÜÿ≥ÿÆ/ÿ™ÿµŸàŸäÿ± = ÿÆÿ±Ÿàÿ¨ ŸÅŸàÿ±Ÿä');
</script>
</body>
</html>